# 📄 文件系统设计简版说明

## 1. 系统要解决的问题

- 公司需要把 Word、Excel、PDF、图片等文件交给 AI 做分析，但原始文件结构复杂，文字、表格、图片混在一起。
- 传统 OCR 只识字，不懂结构和含义，遇到模糊扫描件、表格、截图就失效，AI 无法直接理解。

**目标：任何文件进来，都能变成内容完整、结构清晰的一份 Markdown。**

## 2. 核心思路

- 采用视觉大模型（GPT-4.1、Qwen-VL 等）直接“看懂”文档，不依赖 OCR 清晰度。
- 所有文件先解析成统一的 AST（文档结构树），把标题、段落、表格、图片位置描述清楚。
- 图片只存路径，视觉模型异步读取并生成描述，再填充回 AST。

## 3. 四步流程

1. **解析原文件**：Word/PDF/Excel/图片 → 标题、段落、表格、图片条目，写入 AST。
2. **提取图片**：统一保存为 `images/xxxx.png`，AST 中记录路径。
3. **视觉理解**：调用视觉大模型读取每张图片，产出文字解释或表格内容。
4. **渲染 Markdown**：依据 AST 输出排版良好的 Markdown，供 AI 或人工继续处理。

## 4. 方案优势

- **格式通吃**：文本、表格、流程图、UI 截图都能处理。
- **鲁棒性强**：模糊扫描、低清图片依然可读。
- **结构统一**：Markdown 结构固定，AI 更容易理解和总结。
- **可扩展**：AST + 图片路径设计方便缓存、并发、版本升级。
- **成本可控**：同一图片描述可复用，视觉模型调用可按需并行。

## 5. 应用价值

- 可为任何项目提供“文件 → Markdown”的基础能力。
- 后续可快速衍生 PPT、简报、技术文档或代码骨架等产品形态。
